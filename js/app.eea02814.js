(function(){"use strict";var e={2188:function(e,t,s){var r=s(9242),n=s(3396),o=s(7139);const i=(0,n._)("h3",null,"Sorry! An error happened! ",-1);function a(e,t,s,r,a,l){const u=(0,n.up)("Navbar"),d=(0,n.up)("modal"),c=(0,n.up)("router-view");return(0,n.wg)(),(0,n.iD)("div",{onScroll:t[0]||(t[0]=(...e)=>l.handleScroll&&l.handleScroll(...e)),class:"bg-green-100 h-screen w-screen overflow-auto pb-4"},[((0,n.wg)(),(0,n.j4)(u,{key:a.isOpen,onToggleMusic:l.toggleMusic,onChangeSong:l.changeMusic,isMusicOn:a.isMusicOn},null,8,["onToggleMusic","onChangeSong","isMusicOn"])),((0,n.wg)(),(0,n.j4)(n.lR,{to:"body"},[(0,n.Wm)(d,null,{header:(0,n.w5)((()=>[i])),body:(0,n.w5)((()=>[(0,n._)("h3",null,(0,o.zw)(e.errorStore.error.message),1)])),_:1})])),(0,n.Wm)(c)],32)}s(7658);const l={class:"bg-gray-900 text-gray-100 py-3.5 px-6 shadow-md md:flex justify-between items-center"},u=(0,n._)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[(0,n._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.697 50.697 0 0112 13.489a50.702 50.702 0 017.74-3.342M6.75 15a.75.75 0 100-1.5.75.75 0 000 1.5zm0 0v-3.675A55.378 55.378 0 0112 8.443m-7.007 11.55A5.981 5.981 0 006.75 15.75v-1.5"})],-1),d=[u],c=(0,n._)("h1",{class:"text-2xl hover:text-green-500",id:"title"},"Let's quiz!",-1),h={key:0,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},g=(0,n._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"},null,-1),m=[g],p={key:1,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},w=(0,n._)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"},null,-1),f=[w],x=(0,n._)("a",{href:"quizzes",class:"text-xl hover:text-green-500"},"Quizzes",-1),y=[x],b=(0,n._)("a",{href:"register",class:"text-xl hover:text-green-500"},"Login",-1),S=[b],z=(0,n._)("a",{href:"register",class:"text-xl hover:text-green-500"},"Register",-1),v=[z],k={href:"quizzes",class:"text-xl hover:text-green-500"},q=(0,n._)("a",{href:"logout",class:"text-xl hover:text-green-500"},"Sign Out",-1),_=[q];function j(e,t,s,r,i,a){const u=(0,n.up)("router-link"),g=(0,n.up)("Button");return(0,n.wg)(),(0,n.iD)("div",l,[(0,n.Wm)(u,{to:{name:"quizzes"}},{default:(0,n.w5)((()=>[(0,n._)("div",{class:"flex items-center cursor-pointer",onClick:t[1]||(t[1]=(...e)=>r.playSound&&r.playSound(...e))},[(0,n._)("span",{class:"text-green-500 text-xl mr-1 hover:text-white",onClick:t[0]||(t[0]=(...e)=>r.playSound&&r.playSound(...e))},d),c])])),_:1}),(0,n._)("span",{onClick:t[2]||(t[2]=e=>r.toggleMenu()),class:"absolute md:hidden right-6 top-2 cursor-pointer text-3xl p-2"},[r.isOpen?((0,n.wg)(),(0,n.iD)("svg",p,f)):((0,n.wg)(),(0,n.iD)("svg",h,m))]),(0,n._)("ul",{class:(0,o.C_)(["md:flex md:items-center md-px-0 px-6 md:pb-0 pb-10 md:static absolute bg-gray-900 md:w-auto w-full top-14 duration-100 ease-linear",[r.isOpen?"left-0":"left-[-100%]"]])},[(0,n.Wm)(u,{to:{name:"quizzes"}},{default:(0,n.w5)((()=>[(0,n._)("li",{class:"md:mx-4 md:my-0 my-4",onClick:t[3]||(t[3]=(...e)=>r.playSound&&r.playSound(...e))},y)])),_:1}),r.userStore.user.id?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(u,{key:0,to:{name:"login"}},{default:(0,n.w5)((()=>[(0,n._)("li",{class:"md:mx-4 md:my-0 my-4",onClick:t[4]||(t[4]=(...e)=>r.playSound&&r.playSound(...e))},S)])),_:1})),r.userStore.user.id?((0,n.wg)(),(0,n.j4)(u,{key:2,to:{name:"quizzes"}},{default:(0,n.w5)((()=>[(0,n._)("li",{class:"md:mx-4 md:my-0 my-4",onClick:t[6]||(t[6]=(...e)=>r.playSound&&r.playSound(...e))},[(0,n._)("a",k,(0,o.zw)("Hi "+r.userStore.getName+"!"),1)])])),_:1})):((0,n.wg)(),(0,n.j4)(u,{key:1,to:{name:"register"}},{default:(0,n.w5)((()=>[(0,n._)("li",{class:"md:mx-4 md:my-0 my-4",onClick:t[5]||(t[5]=(...e)=>r.playSound&&r.playSound(...e))},v)])),_:1})),r.userStore.user.id?((0,n.wg)(),(0,n.j4)(u,{key:3,to:{name:"logout"}},{default:(0,n.w5)((()=>[(0,n._)("li",{class:"md:mx-4 md:my-0 my-4",onClick:t[7]||(t[7]=(...e)=>r.signOut&&r.signOut(...e))},_)])),_:1})):(0,n.kq)("",!0),r.userStore.user.id?((0,n.wg)(),(0,n.j4)(g,{key:4,class:(0,o.C_)(["bg-green-500 hover:bg-green-600",{"block m-2 ml-0":1==r.isOpen}]),onClick:r.resetUser},{default:(0,n.w5)((()=>[(0,n.Uk)("Reset Scores")])),_:1},8,["class","onClick"])):(0,n.kq)("",!0),r.userStore.user.id?((0,n.wg)(),(0,n.j4)(g,{key:5,class:(0,o.C_)(["bg-green-500 hover:bg-green-600",{"block m-2 ml-0":1==r.isOpen}]),onClick:r.deleteUser},{default:(0,n.w5)((()=>[(0,n.Uk)("Delete account")])),_:1},8,["class","onClick"])):(0,n.kq)("",!0),(0,n.Wm)(g,{class:(0,o.C_)(["bg-green-500 hover:bg-green-600",{"block m-2 ml-0":1==r.isOpen}]),onClick:t[8]||(t[8]=t=>e.$emit("toggleMusic"))},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(s.isMusicOn?"Pause music":"Play music"),1)])),_:1},8,["class"]),(0,n.Wm)(g,{class:(0,o.C_)(["bg-green-500 hover:bg-green-600",{"block m-2 ml-0":1==r.isOpen}]),onClick:t[9]||(t[9]=t=>e.$emit("changeSong"))},{default:(0,n.w5)((()=>[(0,n.Uk)(" Change Song ")])),_:1},8,["class"])],2)])}var Q=s(4870);const A={class:"bg-green-400 hover:bg-green-500 duration-300 font-sm text-white rounded py-1.5 px-4 font-bold mx-4"};function C(e,t,s,r,o,i){return(0,n.wg)(),(0,n.iD)("button",A,[(0,n.WI)(e.$slots,"default")])}var I={},O=s(89);const M=(0,O.Z)(I,[["render",C]]);var U=M,D=s(1020);const E=(0,D.Q_)("quizzes",{state:()=>({allResults:[{userId:0,userResults:[{quizId:0,questionsCount:0,lastAnsweredIndex:0,score:0}]}]}),getters:{getUserResults(){return e=>{let t=this.allResults.filter((t=>t.userId==e));return void 0==t?{}:t[0]}},getQuizState(){return(e,t)=>{let s=this.getUserResults(e);if(void 0==s)return{};let r=s.userResults.filter((e=>e.quizId==t));return 0==r.length?{}:r[0]}},isQuizStarted(){return(e,t)=>{let s=this.getUserResults(e);if(void 0==s)return!1;let r=s.userResults.filter((e=>e.quizId==t));return 0!=r.length&&r[0].lastAnsweredIndex>0}},isQuizFinished(){return(e,t)=>{let s=this.getUserResults(e);if(void 0==s)return[!1,0];let r=s.userResults.filter((e=>e.quizId==t));return 0==r.length?[!1,0]:(r=r[0],r.questionsCount==r.lastAnsweredIndex?[!0,r.score]:[!1,0])}}},actions:{newQuiz(e,t,s){let r=this.getUserResults(e),n=this.getQuizState(e,t);n.quizId||r.userResults.push({quizId:t,questionsCount:s,lastAnsweredIndex:0,score:0})},saveAnswer(e,t,s){let r=this.getUserResults(e),n=r.userResults,o=n.filter((e=>e.quizId==t));o=o[0],o.score=s,o.lastAnsweredIndex+=1},addNewUser(e){let t=this.getUserResults(e);void 0==t&&this.allResults.push({userId:e,userResults:[]})},deleteUserInformation(e){console.log(this.allResults),console.log("deleted!"),this.allResults=this.allResults.filter((t=>t.userId!==e)),console.log(this.allResults)}},persist:!0}),K=(0,D.Q_)("user",{state:()=>({user:{name:"",surname:"",id:0}}),getters:{isLoggedIn(){return 0!=this.user.id},getName(){return this.user.name+" "+this.user.surname}},actions:{setUser(e,t,s){const r=E();this.user.name=e,this.user.surname=t,this.user.id=s,r.addNewUser(s)}},persist:!0}),T=(0,D.Q_)("error",{state:()=>({error:{message:"",isError:!1}}),actions:{setError(e){this.error.message=e,this.error.isError=!0},clearError(){this.error.message="",this.error.isError=!1}}});var N=s(2483),R=s.p+"media/button.94253ea9.mp3",B={components:{Button:U},props:["isMusicOn"],setup(){const e=(0,n.f3)("apiKey"),t=(0,N.tv)(),s=K(),r=T(),o=E(),i=(0,Q.iH)(!1);let a=[{name:"Quizzes",link:"quizzes"},{name:"Register",link:"register"},{name:"Log out",link:"logout"}];function l(){const e=new Audio(R);e.play()}function u(){l(),i.value=!i.value}function d(){this.playSound(),s.$reset()}function c(){l(),fetch("https://late-glitter-4431.fly.dev/api/v54/users/"+s.user.id,{method:"DELETE",headers:{"X-Access-Token":e.value}}).then((e=>{e.ok?e.json().then((e=>{o.deleteUserInformation(s.user.id),s.$reset(),t.push({name:"register"})})):e.json().then((e=>{r.setError(e.message),console.log(e.message)}))})).catch((e=>{console.log(e.message),this.errorStore.setError(e.message)}))}function h(){l();const n=s.user.name,i=s.user.surname;fetch("https://late-glitter-4431.fly.dev/api/v54/users/"+s.user.id,{method:"DELETE",headers:{"X-Access-Token":e.value}}).then((a=>{a.ok?a.json().then((a=>{o.deleteUserInformation(s.user.id),s.$reset();const l={data:{name:n,surname:i}};fetch("https://late-glitter-4431.fly.dev/api/v54/users",{method:"POST",headers:{"X-Access-Token":e.value,"Content-Type":"application/json"},body:JSON.stringify(l)}).then((e=>{e.ok?e.json().then((e=>{s.setUser(e.name,e.surname,e.id),t.push({name:"quizzes"})})):e.json().then((e=>{r.setError(e.message)}))})).catch((e=>{console.log(e.message),r.setError(e.message)}))})):a.json().then((e=>{r.setError(e.message),console.log(e.message)}))})).catch((e=>{console.log(e.message),this.errorStore.setError(e.message)}))}return{links:a,isOpen:i,toggleMenu:u,userStore:s,deleteUser:c,errorStore:r,quizStore:o,resetUser:h,playSound:l,signOut:d}}};const L=(0,O.Z)(B,[["render",j]]);var P=L;const W={key:0,class:"modal-mask"},F={class:"modal-container"},V={class:"modal-header"},X={class:"modal-body"};function $(e,t,s,o,i,a){const l=(0,n.up)("Button");return(0,n.wg)(),(0,n.j4)(r.uT,{name:"modal"},{default:(0,n.w5)((()=>[e.errorStore.error.isError?((0,n.wg)(),(0,n.iD)("div",W,[(0,n._)("div",F,[(0,n._)("div",V,[(0,n.WI)(e.$slots,"header",{},(()=>[(0,n.Uk)("default header")]))]),(0,n._)("div",X,[(0,n.WI)(e.$slots,"body",{},(()=>[(0,n.Uk)("default body")]))]),(0,n.Wm)(l,{class:"bg-red-300 hover:bg-red-400 w-1/2 h-10",onClick:a.updatePage},{default:(0,n.w5)((()=>[(0,n.Uk)("Okay (ãƒ„)")])),_:1},8,["onClick"])])])):(0,n.kq)("",!0)])),_:3})}var Z={computed:{...(0,D.Kc)(T)},methods:{updatePage(){this.errorStore.$reset(),this.$router.go(0)}},components:{Button:U}};const H=(0,O.Z)(Z,[["render",$]]);var Y=H;const G=(0,D.Q_)("apiKey",{state:()=>({apiKey:"12689b5fadfb2984a0e4bf90ec1a6dfdf3f7f19820c25c532958805c873279ab"}),actions:{setApiKey(e){this.apiKey=e}},persist:{storage:sessionStorage}});var J=s.p+"media/1.b638ce28.mp3",ee=s.p+"media/2.320136c9.mp3",te=s.p+"media/3.21ca0a4a.mp3",se=s.p+"media/4.8d2c1a4e.mp3";const re=(0,D.Q_)("music",{state:()=>({songs:[J,ee,te,se],randomIndex:Math.floor(4*Math.random())}),getters:{getCurrentSong(){return new Audio(this.songs[this.randomIndex])},changeSong(){return new Audio(this.songs[this.randomIndex])}},actions:{changeMusicIndex(){this.randomIndex=3==this.randomIndex?0:this.randomIndex+1}}});var ne={name:"Quiz-App",data(){return{isOpen:!1,isMusicOn:!0,currentSong:""}},computed:{...(0,D.Kc)(T,G,re)},components:{Navbar:P,Modal:Y},provide(){return{apiKey:(0,n.Fl)((()=>this.apiKeyStore.apiKey))}},watch:{errorStore:{handler(e,t){console.log("Old Api Key: ",this.apiKeyStore.apiKey),"Unauthorized. X-Access-Token is missing or is invalid."==e.error.message&&this.fetchNewApiKey()},deep:!0}},methods:{handleScroll(e){const{scrollTop:t,offsetHeight:s,scrollHeight:r}=e.target;t<=150&&(this.isOpen=!this.isOpen)},toggleMusic(){this.isMusicOn?(this.isMusicOn=!this.isMusicOn,this.currentSong.pause()):(this.isMusicOn=!this.isMusicOn,this.currentSong.play())},changeMusic(){this.currentSong.pause(),this.musicStore.changeMusicIndex(),this.currentSong=this.musicStore.changeSong,this.currentSong.play()},fetchNewApiKey(){fetch("https://late-glitter-4431.fly.dev/api/developers/v72/tokens",{method:"POST",headers:{"X-Developer-Key":"7216550998ab95f91fda0ce4a29596b168a05d772aaccdbb8346a744313adf24","X-Developer-Secret":"21ba2389462476785177586145ca6f51595eecd24bccccfc16df999118406f6d"}}).then((e=>{e.ok?e.json().then((e=>{this.apiKeyStore.setApiKey(e.token),console.log("New Api Key: ",this.apiKeyStore.apiKey)})):e.json().then((e=>{console.log(err.message),this.errorStore.setError(e.message)}))})).catch((e=>{console.log(e.message),this.errorStore.setError(e.message)}))},populateQuizzes(){let e=[22];for(let t=0;t<e.length;t++)fetch("https://opentdb.com/api.php?amount=14&category="+e[t],{method:"GET"}).then((e=>{e.ok?e.json().then((e=>{let t=e.results;console.log(e);let s=t[0],r={data:{title:s.category,questions:[]}},n=r.data;for(let o=0;o<t.length;o++){const e=t[o];n.questions.push({question:e.question,answers:[e.correct_answer,e.incorrect_answers[0],e.incorrect_answers[1],e.incorrect_answers[2]],correct_answer:e.correct_answer})}n.questions=n.questions.sort(((e,t)=>.5-Math.random())),fetch("https://late-glitter-4431.fly.dev/api/v54/quizzes",{method:"POST",headers:{"X-Access-Token":this.API_KEY,"Content-Type":"application/json"},body:JSON.stringify(r)}).then((e=>{e.ok?e.json().then((e=>{console.log("Succesfully created")})):e.json().then((e=>{console.log(e.message)}))}))})):e.json().then((e=>{console.log(e)}))})).catch((e=>{console.log(e.message)}))}},mounted(){this.currentSong=this.musicStore.getCurrentSong,this.currentSong.play()},unmounted(){this.currentSong.pause()}};const oe=(0,O.Z)(ne,[["render",a]]);var ie=oe;const ae={class:"mt-11 mx-11 grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-10 justify-items-center"},le={key:0,class:"mx-60 my-40 absolute"},ue=(0,n._)("h1",{class:"text-green-800 text-5xl"},"Loading...",-1),de=(0,n._)("svg",{class:"animate-spin h-36 w-36 text-green-800 ml-3 mt-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"{1.5}",stroke:"currentColor",className:"w-6 h-6"},[(0,n._)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.182 15.182a4.5 4.5 0 01-6.364 0M21 12a9 9 0 11-18 0 9 9 0 0118 0zM9.75 9.75c0 .414-.168.75-.375.75S9 10.164 9 9.75 9.168 9 9.375 9s.375.336.375.75zm-.375 0h.008v.015h-.008V9.75zm5.625 0c0 .414-.168.75-.375.75s-.375-.336-.375-.75.168-.75.375-.75.375.336.375.75zm-.375 0h.008v.015h-.008V9.75z"})],-1),ce=[ue,de];function he(e,t,s,r,i,a){const l=(0,n.up)("Card"),u=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",ae,[i.loaded?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",le,ce)),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.quizzes,(e=>((0,n.wg)(),(0,n.j4)(u,{class:"min-w-full min-h-full",key:e.id,to:{name:"quizView",params:{id:e.id}}},{default:(0,n.w5)((()=>[(0,n.Wm)(l,{class:(0,o.C_)(["min-w-full min-h-full",{"bg-emerald-500":3==a.getQuizStateInNum(e.id,e.questions_count),"bg-yellow-200":2==a.getQuizStateInNum(e.id,e.questions_count),"bg-white":1==a.getQuizStateInNum(e.id,e.questions_count)}]),onClick:t=>a.addQuizToStore(e.id,e.questions_count),header:e.title,description:"Questions "+e.questions_count,quizState:a.getQuizStateInString(e.id,e.questions_count)},null,8,["onClick","header","description","quizState","class"])])),_:2},1032,["to"])))),128))])}const ge={class:"max-w-sm rounded-lg overflow-hidden border-gray-200 shadow-md hover:shadow-lg px-6 py-4 flex flex-col justify-center items-center cursor-pointer"},me={class:"font-bold text-xl mb-2 text-center flex-auto"},pe={class:"text-gray-700 text-base text-center bg-gray-200 rounded-full px-3 py-1 font-semibold w-32 border-solid border-2 border-gray-300 shadow-sm"};function we(e,t,s,r,i,a){const l=(0,n.up)("Button");return(0,n.wg)(),(0,n.iD)("div",ge,[(0,n._)("div",me,(0,o.zw)(s.header),1),(0,n._)("p",pe,(0,o.zw)(s.description),1),(0,n.Wm)(l,{class:"mt-4 text-center"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(s.quizState),1)])),_:1})])}var fe={props:["header","description","quizState"],components:{Button:U}};const xe=(0,O.Z)(fe,[["render",we]]);var ye=xe,be={name:"QuizzesView",components:{Card:ye},inject:["apiKey"],data(){return{quizzes:[],loaded:!1}},computed:{...(0,D.Kc)(T,K,E)},methods:{playSound(){const e=new Audio(R);e.play()},addQuizToStore(e,t){this.playSound(),this.quizzesStore.newQuiz(this.userStore.user.id,e,t)},getQuizStateInString(e,t){if(this.quizzesStore.isQuizStarted(this.userStore.user.id,e)){let s,r;if([s,r]=this.quizzesStore.isQuizFinished(this.userStore.user.id,e),s){let e=r/t*100;return e.toFixed(2),"Score: "+e.toFixed(2)+" %"}const n=this.quizzesStore.getQuizState(this.userStore.user.id,e);return"In progress: "+n.lastAnsweredIndex+"/10"}return"Try it!"},getQuizStateInNum(e,t){if(this.quizzesStore.isQuizStarted(this.userStore.user.id,e)){let t,s;return[t,s]=this.quizzesStore.isQuizFinished(this.userStore.user.id,e),t?3:2}return 1},sortQuizzes(){const e=this.quizzes.filter((e=>{let t,s;return[t,s]=this.quizzesStore.isQuizFinished(this.userStore.user.id,e.id),t})),t=this.quizzes.filter((e=>{let t,s;return[t,s]=this.quizzesStore.isQuizFinished(this.userStore.user.id,e.id),this.quizzesStore.isQuizStarted(this.userStore.user.id,e.id)&&!t})),s=this.quizzes.filter((e=>{let t,s;return[t,s]=this.quizzesStore.isQuizFinished(this.userStore.user.id,e.id),0==t&&0==this.quizzesStore.isQuizStarted(this.userStore.user.id,e.id)}));this.quizzes=e.concat(t,s)}},mounted(){fetch("https://late-glitter-4431.fly.dev/api/v54/quizzes",{method:"GET",headers:{"X-Access-Token":this.apiKey}}).then((e=>{e.ok?e.json().then((e=>{this.quizzes=e,this.sortQuizzes(),this.loaded=!0})):e.json().then((e=>{console.log(e),this.errorStore.setError(e.message)}))})).catch((e=>{console.log(e.message),this.errorStore.setError(e.message)}))}};const Se=(0,O.Z)(be,[["render",he]]);var ze=Se;const ve={class:"pt-14 overflow-auto md:px-36 flex flex-col px-10 items-center"},ke={key:0,class:"mt-28"},qe=(0,n._)("h1",{class:"text-green-800 text-5xl"},"Loading...",-1),_e=(0,n._)("svg",{class:"animate-spin h-36 w-36 text-green-800 ml-3 mt-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"{1.5}",stroke:"currentColor",className:"w-6 h-6"},[(0,n._)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.182 15.182a4.5 4.5 0 01-6.364 0M21 12a9 9 0 11-18 0 9 9 0 0118 0zM9.75 9.75c0 .414-.168.75-.375.75S9 10.164 9 9.75 9.168 9 9.375 9s.375.336.375.75zm-.375 0h.008v.015h-.008V9.75zm5.625 0c0 .414-.168.75-.375.75s-.375-.336-.375-.75.168-.75.375-.75.375.336.375.75zm-.375 0h.008v.015h-.008V9.75z"})],-1),je=[qe,_e],Qe={key:1,class:"text-5xl font-bold text-center text-red-900"},Ae={key:2,class:"text-gray-600 font-semibold md:text-2xl text-lgtext-center py-4"},Ce={key:3,class:"text-center font-bold xl:text-4xl xl:px-40 xl:leading-normal lg:text-3xl lg:leading-normal lg:px-2 md:text-2xl md:leading-normal md:px-2 sm:text-2xl sm:leading-normal sm:px-2 text-xl py-10 px-2"},Ie={key:4,class:"text-center text-6xl p-9 text-red-800 mt-24"};function Oe(e,t,s,i,a,l){return(0,n.wg)(),(0,n.iD)("div",ve,[a.loaded?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",ke,je)),a.quiz.title?((0,n.wg)(),(0,n.iD)("h1",Qe,(0,o.zw)(a.quiz.title),1)):(0,n.kq)("",!0),a.currentQuestion&&a.quiz.title?((0,n.wg)(),(0,n.iD)("div",Ae," Currently at question "+(0,o.zw)(a.currentQuestionIndex+1)+" of "+(0,o.zw)(a.questions.length),1)):(0,n.kq)("",!0),a.currentQuestion&&a.quiz.title?((0,n.wg)(),(0,n.iD)("h2",Ce,(0,o.zw)(l.htmlDecode(a.currentQuestion.question)),1)):(0,n.kq)("",!0),a.currentQuestion?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("h2",Ie,[(0,n.Uk)("Score: "),(0,n._)("span",{class:(0,o.C_)(["block text-center text-5xl p-9 text-green-800",{"text-red-600":this.score/this.questions.length*100<50}])},(0,o.zw)((this.score/this.questions.length*100).toFixed(2))+" % ",3)])),a.currentQuestion?((0,n.wg)(),(0,n.iD)("form",{key:5,onSubmit:t[1]||(t[1]=(0,r.iM)(((...t)=>e.handleSubmit&&e.handleSubmit(...t)),["prevent"])),class:"grid sm:grid-cols-1 md:grid-cols-1 lg:grid-cols-2 xl:grid-cols-2 gap-10 justify-items-center pb-16 pt-10"},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.currentQuestion.answers,(e=>((0,n.wg)(),(0,n.iD)("button",{class:(0,o.C_)(["transition duration-200 ease-out bg-white hover:bg-gray-100 border-2 border-green-700 text-2xl p-8 m-4 rounded-lg font-bold min-w-full min-h-full overflow-hidden shadow-xl hover:shadow-lg px-6 py-4 hover:scale-110",{"bg-yellow-100 border-8 border-yellow-300  ":a.selectedAnswer==e,"shake border-red-400 bg-red-50":a.warnButton}]),key:e,onClick:t[0]||(t[0]=(...e)=>l.handleClick&&l.handleClick(...e))},(0,o.zw)(l.htmlDecode(e)),3)))),128))],32)):(0,n.kq)("",!0),a.currentQuestion&&a.quiz.title?((0,n.wg)(),(0,n.iD)("button",{key:6,onClick:t[2]||(t[2]=(...e)=>l.nextQuestion&&l.nextQuestion(...e)),class:(0,o.C_)([{"cursor-not-allowed":""==a.selectedAnswer,"hover:bg-green-300  hover:scale-105":""!==a.selectedAnswer,"shake border-red-400 bg-red-200 text-red-900":a.warnButton},"text-center bg-green-200 border-4 border-yellow-400 rounded-xl text-xl lg:text-3xl w-1/6 h-12 sm:w-1/2 lg:w-1/6 mb-9 lg:h-16 font-semibold shadow-lg hover:shadow-xl"])}," Next ",2)):(0,n.kq)("",!0)])}var Me=s.p+"media/cartoon-jump.254aadec.mp3",Ue=s.p+"media/error.c2676214.mp3",De=s.p+"media/game-complete.1c91f606.mp3",Ee={props:["id"],data(){return{warnButton:!1,quiz:{},questions:[],currentQuestionIndex:0,currentQuestion:{},selectedAnswer:"",body:{},response:{},error:"",score:0,loaded:!1}},inject:["apiKey"],computed:{...(0,D.Kc)(K,T,E)},methods:{warnSelectAnswer(){const e=new Audio(Ue);e.play(),this.warnButton=!0,setTimeout((()=>{this.warnButton=!1}),1500)},nextQuestion(){if(""==this.selectedAnswer)this.warnSelectAnswer();else{const e=new Audio(De);e.play(),this.constructRequestBody(),this.submitAnswer(),this.resetData()}},handleClick(e){const t=new Audio(Me);t.play(),this.selectedAnswer==e.target.innerText?this.selectedAnswer="":this.selectedAnswer=e.target.innerText},constructRequestBody(){this.body={data:{question_id:this.currentQuestion.id,answer:this.selectedAnswer,user_id:this.userStore.user.id}}},submitAnswer(){fetch("https://late-glitter-4431.fly.dev/api/v54/quizzes/"+this.quiz.id+"/submit",{method:"POST",headers:{"X-Access-Token":this.apiKey,"Content-Type":"application/json"},body:JSON.stringify(this.body)}).then((e=>{e.ok?e.json().then((e=>{this.response=e,!0===this.response.correct&&(this.score+=1),console.log(this.score),this.quizzesStore.saveAnswer(this.userStore.user.id,this.id,this.score)})):e.json().then((e=>{console.log(e),this.error=e.message,this.errorStore.setError(e.message[0])}))})).catch((e=>{console.log(e.message),this.errorStore.setError(e.message)}))},resetData(){this.currentQuestionIndex+=1,this.currentQuestion=this.questions[this.currentQuestionIndex],this.selectedAnswer=""},htmlDecode(e){var t=(new DOMParser).parseFromString(e,"text/html");return t.documentElement.textContent}},mounted(){fetch("https://late-glitter-4431.fly.dev/api/v54/quizzes/"+this.id,{method:"GET",headers:{"X-Access-Token":this.apiKey}}).then((e=>{e.ok?e.json().then((e=>{this.quiz=e,this.questions=e.questions;const t=this.quizzesStore.getQuizState(this.userStore.user.id,this.id);t.lastAnsweredIndex?this.currentQuestionIndex=t.lastAnsweredIndex:this.currentQuestionIndex=0,this.score=t.score,this.currentQuestion=this.questions[this.currentQuestionIndex],this.loaded=!0})):e.json().then((e=>{console.log(e),this.error=e.message,this.errorStore.setError(e.message),console.log(this.apiKey)}))})).catch((e=>{console.log(e.message),this.errorStore.setError(e.message)}))}};const Ke=(0,O.Z)(Ee,[["render",Oe]]);var Te=Ke;function Ne(e,t,s,r,o,i){return(0,n.wg)(),(0,n.iD)("h1",null,"Page Not Found 404")}var Re={};const Be=(0,O.Z)(Re,[["render",Ne]]);var Le=Be;const Pe=(0,n._)("h1",{class:"font-bold text-5xl p-8 text-center mt-28 text-emerald-900"},"Register!",-1),We={class:"w-1/4 absolute bg-green-100 top-1/3 left-1/3 ml-24"},Fe={class:"mb-4"},Ve=(0,n._)("label",{class:"block text-gray-700 text-lg font-bold mb-2",for:"Name"}," Name ",-1),Xe={class:"mb-4"},$e=(0,n._)("label",{class:"block text-gray-700 text-lg font-bold mb-2",for:"Surname"}," Surname ",-1),Ze={key:0},He=(0,n._)("div",{class:"flex items-center justify-between"},[(0,n._)("button",{class:"bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"}," Sign Up ")],-1);function Ye(e,t,s,i,a,l){return(0,n.wg)(),(0,n.iD)(n.HY,null,[Pe,(0,n._)("div",We,[(0,n._)("form",{class:"bg-white shadow-md rounded px-8 pt-6 pb-8",onSubmit:t[2]||(t[2]=(0,r.iM)(((...e)=>l.handleSubmit&&l.handleSubmit(...e)),["prevent"]))},[(0,n._)("div",Fe,[Ve,(0,n.wy)((0,n._)("input",{class:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"Name",type:"text",placeholder:"Name","onUpdate:modelValue":t[0]||(t[0]=e=>a.name=e)},null,512),[[r.nr,a.name]])]),(0,n._)("div",Xe,[$e,(0,n.wy)((0,n._)("input",{class:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"Surname",type:"text",placeholder:"Surname","onUpdate:modelValue":t[1]||(t[1]=e=>a.surname=e)},null,512),[[r.nr,a.surname]])]),a.error?((0,n.wg)(),(0,n.iD)("div",Ze,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.error,(e=>((0,n.wg)(),(0,n.iD)("p",{class:"text-red-500 font-bold bg-red-100 rounded-md text-center p-2 mb-4",key:e},(0,o.zw)(e),1)))),128))])):(0,n.kq)("",!0),He],32)])],64)}var Ge={components:{},inject:["apiKey"],name:"RegisterView",data(){return{name:"",surname:"",error:[],body:{},response:{}}},watch:{name(e,t){this.error=this.error.filter((e=>"Name must be at least 3 characters long"!==e)),this.name.length>2?this.error:this.error.push("Name must be at least 3 characters long")},surname(e,t){this.error=this.error.filter((e=>"Surname must be at least 3 characters long"!==e)),this.surname.length>2?this.error:this.error.push("Surname must be at least 3 characters long")}},methods:{playSound(){const e=new Audio(R);e.play()},handleSubmit(){this.playSound(),0==this.error.length&&""!=this.surname&&""!=this.name&&(this.body={data:{name:this.name,surname:this.surname}},fetch("https://late-glitter-4431.fly.dev/api/v54/users",{method:"POST",headers:{"X-Access-Token":this.apiKey,"Content-Type":"application/json"},body:JSON.stringify(this.body)}).then((e=>{e.ok?e.json().then((e=>{this.response=e,this.userStore.setUser(e.name,e.surname,e.id),this.name="",this.surname="",this.$router.push({name:"quizzes"})})):e.json().then((e=>{this.error=[e.message],this.errorStore.setError(e.message)}))})).catch((e=>{console.log(e.message),this.errorStore.setError(e.message)})))}},setup(){const e=K(),t=T();return{userStore:e,errorStore:t}}};const Je=(0,O.Z)(Ge,[["render",Ye]]);var et=Je;const tt=(0,n._)("h1",{class:"font-bold text-5xl p-8 text-center mt-28 text-emerald-900"},"Login!",-1),st={class:"w-1/4 absolute bg-green-100 top-1/3 left-1/3 ml-24"},rt={class:"mb-4"},nt=(0,n._)("label",{class:"block text-gray-700 text-lg font-bold mb-2",for:"Name"}," Name ",-1),ot={class:"mb-4"},it=(0,n._)("label",{class:"block text-gray-700 text-lg font-bold mb-2",for:"Surname"}," Surname ",-1),at={key:0},lt=(0,n._)("div",{class:"flex items-center justify-between"},[(0,n._)("button",{class:"bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"}," Sign in ")],-1);function ut(e,t,s,i,a,l){return(0,n.wg)(),(0,n.iD)(n.HY,null,[tt,(0,n._)("div",st,[(0,n._)("form",{class:"bg-white shadow-md rounded px-8 pt-6 pb-8",onSubmit:t[2]||(t[2]=(0,r.iM)(((...e)=>l.handleSubmit&&l.handleSubmit(...e)),["prevent"]))},[(0,n._)("div",rt,[nt,(0,n.wy)((0,n._)("input",{class:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"Name",type:"text",placeholder:"Name","onUpdate:modelValue":t[0]||(t[0]=e=>a.name=e)},null,512),[[r.nr,a.name]])]),(0,n._)("div",ot,[it,(0,n.wy)((0,n._)("input",{class:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"Surname",type:"text",placeholder:"Surname","onUpdate:modelValue":t[1]||(t[1]=e=>a.surname=e)},null,512),[[r.nr,a.surname]])]),a.error?((0,n.wg)(),(0,n.iD)("div",at,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.error,(e=>((0,n.wg)(),(0,n.iD)("p",{class:"text-red-500 font-bold bg-red-100 rounded-md text-center p-2 mb-4",key:e},(0,o.zw)(e),1)))),128))])):(0,n.kq)("",!0),lt],32)])],64)}var dt={components:{},inject:["apiKey"],name:"RegisterView",data(){return{name:"",surname:"",error:[],users:[],loggedUser:{}}},watch:{name(e,t){this.error=this.error.filter((e=>"Name must be at least 3 characters long"!==e)),this.name.length>2?this.error:this.error.push("Name must be at least 3 characters long")},surname(e,t){this.error=this.error.filter((e=>"Surname must be at least 3 characters long"!==e)),this.surname.length>2?this.error:this.error.push("Surname must be at least 3 characters long")}},mounted(){fetch("https://late-glitter-4431.fly.dev/api/v54/users",{method:"GET",headers:{"X-Access-Token":this.apiKey}}).then((e=>{e.ok?e.json().then((e=>{this.users=e})):e.json().then((e=>{this.error.push(e.message),this.errorStore.setError(e.message)}))})).catch((e=>{console.log(e.message),this.errorStore.setError(e.message)}))},methods:{playSound(){const e=new Audio(R);e.play()},handleSubmit(){this.playSound(),0==this.error.length&&""!=this.surname&&""!=this.name&&(this.loggedUser=this.users.filter((e=>e.name==this.name&&e.surname==this.surname)),0==this.loggedUser.length?this.error.push("No such user!"):(this.loggedUser=this.loggedUser[0],this.userStore.setUser(this.loggedUser.name,this.loggedUser.surname,this.loggedUser.id),this.name="",this.surname="",this.error=[],this.$router.push({name:"quizzes"})))}},setup(){const e=K(),t=T();return{userStore:e,errorStore:t}}};const ct=(0,O.Z)(dt,[["render",ut]]);var ht=ct;const gt=[{path:"/",name:"quizzes",component:ze},{path:"/register",name:"register",component:et,beforeEnter:(e,t)=>{const s=K();if(s.isLoggedIn)return t}},{path:"/logout",name:"logout"},{path:"/login",name:"login",component:ht,beforeEnter:(e,t)=>{const s=K();if(s.isLoggedIn)return t}},{path:"/quiz/:id",name:"quizView",component:Te,props:!0},{path:"/:catchAll(.*)",component:Le}],mt=(0,N.p7)({history:(0,N.PO)("/PW/"),routes:gt});mt.beforeEach((async(e,t)=>{const s=K();if(!s.isLoggedIn&&"login"!==e.name&&"register"!==e.name)return{name:"login"}}));var pt=mt,wt=s(5417);const ft=(0,r.ri)(ie);ft.config.unwrapInjectedRef=!0,ft.use(pt).use((0,D.WB)().use(wt.Z)).mount("#app")}},t={};function s(r){var n=t[r];if(void 0!==n)return n.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,s),o.exports}s.m=e,function(){var e=[];s.O=function(t,r,n,o){if(!r){var i=1/0;for(d=0;d<e.length;d++){r=e[d][0],n=e[d][1],o=e[d][2];for(var a=!0,l=0;l<r.length;l++)(!1&o||i>=o)&&Object.keys(s.O).every((function(e){return s.O[e](r[l])}))?r.splice(l--,1):(a=!1,o<i&&(i=o));if(a){e.splice(d--,1);var u=n();void 0!==u&&(t=u)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[r,n,o]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.p="/PW/"}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,r){var n,o,i=r[0],a=r[1],l=r[2],u=0;if(i.some((function(t){return 0!==e[t]}))){for(n in a)s.o(a,n)&&(s.m[n]=a[n]);if(l)var d=l(s)}for(t&&t(r);u<i.length;u++)o=i[u],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(d)},r=self["webpackChunkquiz_app"]=self["webpackChunkquiz_app"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=s.O(void 0,[998],(function(){return s(2188)}));r=s.O(r)})();
//# sourceMappingURL=app.eea02814.js.map